#!/usr/bin/env bash

set -euo pipefail

source script/env "$@"
source "$DIR/script/lib/common.sh"

require_macos error "Launch requires macOS."

script/build

APP_NAME="${APP_NAME:-OpenShot}"
CONFIGURATION="${CONFIGURATION:-Debug}"
DERIVED_DATA="${DERIVED_DATA:-$DIR/build/DerivedData}"
APP_PATH="$DERIVED_DATA/Build/Products/$CONFIGURATION/$APP_NAME.app"

if [[ ! -d "$APP_PATH" ]]; then
  echo -e "${RED}App not found at ${APP_PATH}.${OFF}"
  exit 1
fi

echo -e "${BLUE}Launching ${APP_NAME}...${OFF}"
open "$APP_PATH"
